{% extends "base.html" %}

{% block content %}
<h1 align='center'>Welcome : {{ user }}</h1>
<h4 align='center'>ศูนย์บริการเครื่องมือวิเคราะห์วัสดุและนาโนเทคโนโลยี</h4>
<h4 align='center'>วิทยาลัยนาโนเทคโนโลยีพระจอมเกล้าลาดกระบัง</h4>
<br>
<div class="container" align='center'>
    <a href="/user/{{ year }}-{{ month }}" class="btn btn-info">Month</a>
    <a href="/today/{{ year }}-{{ month }}-{{ date }}" class="btn btn-info">Today</a>
    <a href="{{ url_for('pending') }}" class="btn btn-success">Pending</a>
    <a href="{{ url_for('creatuser') }}" class="btn btn-info">Create user</a>
    <a href="{{ url_for('topup') }}" class="btn btn-info">Topup</a>
    <a href="{{ url_for('export') }}" class="btn btn-info">Export</a>
</div>
<br>
<div class="container">
    <br>
    <table class="table table-bordered" align="center">
        <thead>
            <tr style="background-color:gainsboro">
                <th style="text-align:center">เลขที่การจอง</th>
                <th style="text-align:center">เครื่องมือ</th>
                <th style="text-align:center">ผู้ทำการจอง</th>
                <th style="text-align:center">ผู้ใช้งานเครื่องมือ</th>
                <th style="text-align:center">หมายเลขโทรศัพท์</th>
                <th style="text-align:center">สารที่ทดสอบ</th>
                <th style="text-align:center">บันทึก</th>
                <th style="text-align:center">วันที่ทำการจอง</th>
                <th style="text-align:center">วันที่ใช้เครื่องมือ</th>
                <th style="text-align:center">09-10</th>
                <th style="text-align:center">10-11</th>
                <th style="text-align:center">11-12</th>
                <th style="text-align:center">13-14</th>
                <th style="text-align:center">14-15</th>
                <th style="text-align:center">15-16</th>
                <th style="text-align:center">สถานะ</th>
                <th style="text-align:center">ค่าใช้จ่าย</th>
                <th style="text-align:center">Action</th>
            </tr>
        </thead>
        <tbody>
            {% set count = {'value': 0} %}
            {% for row in data %}
            {% if count.value is divisibleby(2) %}
            <tr style="background-color:white">
            {% else %}
            <tr style="background-color:ivory">
            {% endif %}
                <td style="text-align:center">{{ row.0 }}</td>
                <td style="text-align:center">{{ row.28 }}</td>
                <td style="text-align:center">{{ row.22 }}</td>
                <td style="text-align:center">{{ row.2 }}</td>
                <td style="text-align:center">
                    {% if row.3 %}
                        {{ row.3 }}
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {% if row.4 %}
                        {{ row.4 }}
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {% if row.17 %}
                        {{ row.17 }}
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">{{ row.5 }}</td>
                <td style="text-align:center">{{ row.6 }}</td>
                <td style="text-align:center">
                    {% if row.7 == 1 %}
                        &#x2713;
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {% if row.8 == 1 %}
                        &#x2713;
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {% if row.9 == 1 %}
                        &#x2713;
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {% if row.10 == 1 %}
                        &#x2713;
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {% if row.11 == 1 %}
                        &#x2713;
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {% if row.12 == 1 %}
                        &#x2713;
                    {% else %}
                        &nbsp
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {% if row.13 == "Approve" %}
                        <span style="color:green">{{ row.13 }}</span>
                    {% elif row.13 == "Pending" %}
                        {{ row.13 }}
                    {% else %}
                        <span style="color:red">{{ row.13 }}</span>
                    {% endif %}
                </td>
                <td style="text-align:center">
                    {{ row.15 }}
                </td>
                <td style="text-align:center">
                    <a href="/approve/{{ row.0 }}" class="btn btn-success btn-xs" onclick="return confirm('คุณต้องการยืนยันการจองหรือไม่?')">Approve</a><br>
                    <a href="/edit/{{ row.0 }}" class="btn btn-warning btn-xs" onclick="return confirm('คุณต้องการแก้ไขข้อมูลหรือไม่?')">Edit</a><br>
                    <a href="/cancel/{{ row.0 }}" class="btn btn-danger btn-xs" onclick="return confirm('คุณต้องการยกเลิกการจองหรือไม่?')">Cancel</a>
                </td>
            </tr>
            {% if count.update({'value': (count.value + 1)}) %} {% endif %}
            {% endfor %}
        </tbody>
    </table>
    {% if user %}
        <a href="{{ url_for('add_form') }}" class="btn btn-success">จองใช้เครื่องมือ</a>
    {% endif %}
    <span class="pull-right">Updated : <span id="datetime"></span></span>
    <script>
        var dt = new Date();
        document.getElementById("datetime").innerHTML = dt.toLocaleString();
    </script>
    <script>
        $(function () {
            $('#datetimepicker1').datetimepicker({
                daysOfWeekDisabled: [0, 6],
                format: 'L',
                format: 'DD-MM-YYYY'
            });
        });
    </script>
</div>
{% endblock %}
